<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script type="module">
      import {
        createHexGrid,
        setPassable,
        setCell,
        findPath,
        getNeighbors,
        setCellData,
        query,
        createEntities,
      } from "../src/index.js";

      let grid = createHexGrid(1, { layout: "flat" });

      const entities = createEntities();

      const player = entities.create({
        player: true,
        health: 100,
        attack: 15,
      });

      const enemy = entities.create({
        enemy: true,
        health: 90,
        attack: 15,
      });

      const enemy2 = entities.create({
        enemy: true,
        health: 80,
        attack: 15,
      });

      const potion = entities.create({
        potion: true,
        healAmount: 25,
      });

      grid = setCellData(grid, { x: -1, y: 0, z: 1 }, player, potion);
      grid = setCellData(grid, { x: 1, y: 0, z: -1 }, enemy);
      grid = setCellData(grid, { x: 0, y: 0, z: 0 }, enemy2);

      const enemyEnts = query(grid, "health").filter((ent) => {
        const [cell, entity] = ent;

        if (entity.health < 100) {
          return entity;
        }
      });

      console.log(enemyEnt);

      const gridForDisplay = {
        ...grid,
        cells: Array.from(grid.cells.entries()),
      };
      document.getElementById("code").innerHTML = JSON.stringify(
        gridForDisplay,
        null,
        2
      );
    </script>
  </head>
  <body>
    <pre><code id="code"></code></pre>
  </body>
</html>
